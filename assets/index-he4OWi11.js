(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();const c={size:3e3,padding:300};function E(){const{size:e}=c,n=document.getElementById("cover");if(n instanceof HTMLCanvasElement){const t=n.getContext("2d");t==null||t.clearRect(0,0,e,e)}}function p(e){console.error(e)}async function y(e){return new Promise((n,t)=>{const r=`An error from getImage(${e})`,o=new Image;o.addEventListener("load",()=>n(o)),o.addEventListener("error",a=>t(a.message??r)),o.src=e})}const I="/assets/background-C2fbJ8lP.jpg";async function v(e){const n=await y(I);e.drawImage(n,0,0)}function S(e,n){const t=e.toDataURL("image/jpeg"),r=document.getElementById("download");r instanceof HTMLAnchorElement&&(r.href=t,r.download=`${n}.jpg`)}function w({ctx:e,posX:n,posY:t,size:r}){e.beginPath(),e.arc(n,t,r,0,Math.PI*2),e.fillStyle=`hsl(0, 0%, ${Math.random()*50}%)`,e.globalAlpha=Math.random()/2,e.fill(),e.closePath()}function P({ctx:e,posX:n,posY:t,size:r}){e.fillStyle=`hsl(0, 0%, ${Math.random()*50}%)`,e.globalAlpha=Math.random()/2,e.fillRect(n,t,r,r)}function T({ctx:e,posX:n,posY:t,size:r}){const o=Math.sin(Math.PI/3)*r;e.beginPath(),e.moveTo(n+r/2,t),e.lineTo(n+r,t+o),e.lineTo(n,t+o),e.fillStyle=`hsl(0, 0%, ${Math.random()*50}%)`,e.globalAlpha=Math.random()/2,e.fill(),e.closePath()}const f=[100,150,200,250,300,350,400,500],{size:m}=c,u=[P,T,w];function C(e,n=30){e.fillStyle="black",e.fillRect(0,0,m,m);for(let t=0;t<n;t+=1){const r=h(t),o=h(t),a=f[Math.floor(Math.random()*f.length)];u[Math.floor(Math.random()*u.length)]({ctx:e,posX:r,posY:o,size:a})}e.globalAlpha=1}function h(e){const n=m-Math.max(...f)-e;return e+Math.random()*n}const H="/assets/logo-CDxPNFaE.svg";async function $(e){const{size:a,padding:i}=c,s=300,L=s*(449.978/489.315),g=a-i-s,M=g-200,b=await y(H);e.drawImage(b,M,g,L,s)}const d='"Roboto Slab", serif';function A({ctx:e,artistLine1:n,artistLine2:t,releaseTitle:r,releaseNo:o}){const{size:a,padding:i}=c;e.fillStyle="white",e.font=`900 120px ${d}`,e.fillText(n.toUpperCase(),i,a-i-240),e.fillText(t.toUpperCase(),i,a-i-100),e.font=`300 70px ${d}`,e.fillText(r,i,a-i),e.font=`300 70px ${d}`,e.fillText(`NSR${o}`,a-i-200,a-i-119)}async function R({artistLine1:e,artistLine2:n,releaseTitle:t,releaseNo:r,elementsAmount:o=0}){try{const a=document.getElementById("cover"),{size:i}=c;if(a instanceof HTMLCanvasElement){a.width=i,a.height=i;const s=a.getContext("2d");s&&(o>0?C(s,o):await v(s),await $(s),A({ctx:s,artistLine1:e,artistLine2:n,releaseTitle:t,releaseNo:r})),S(a,`NSR${r}`)}}catch(a){p(a)}}function l(e){return e instanceof HTMLInputElement?e.value:""}function N(e){e.preventDefault();const{target:n}=e;if(n instanceof HTMLFormElement){const{elements:t}=n;R({artistLine1:l(t.namedItem("artist-line-1")),artistLine2:l(t.namedItem("artist-line-2")),releaseTitle:l(t.namedItem("release-title")),releaseNo:l(t.namedItem("release-no")),elementsAmount:Number.parseInt(l(t.namedItem("random-elements")),10)}).catch(p)}}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("details");e==null||e.addEventListener("submit",N),e==null||e.addEventListener("reset",E)});
